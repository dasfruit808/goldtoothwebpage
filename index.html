<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gold Tooth - Upcoming Shows (GB Style)</title>
    <link rel="stylesheet" href="styles.css">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body class="site-wrapper">

    <div id="loadingScreen" class="loading-screen">
        <div class="loading-frame">
            <div class="loading-display">
                <div class="loading-logo">Gold Tooth</div>
                <div class="loading-progress">
                    <div class="loading-bar"></div>
                </div>
                <p class="loading-text">LOADING</p>
            </div>
        </div>
    </div>

    <nav class="top-toolbar" aria-label="Primary navigation">
        <a class="toolbar-link" href="#" data-destination="spotify">Spotify</a>
        <a class="toolbar-link" href="#" data-destination="shop">Shop</a>
        <a class="toolbar-link" href="#" data-destination="instagram">Instagram</a>
        <a class="toolbar-link" href="#" data-destination="youtube">YouTube</a>
    </nav>

    <main class="content-section">
        <h2>Upcoming Shows</h2>

        <ul class="show-list">
            <li>
                <span class="date">Oct 24</span>: 
                <a href="https://tickets.wethebeat.com/e/thebuttertones-swan-dive/tickets?utm_source=affiliate&utm_name=Artist&utm_campaign=Artist&utm_id=686d8435c93c46d29fb73d7b0a1e63a2" target="_blank">Las Vegas, NV - Swan Dive</a>
            </li>
            <li>
                <span class="date">Oct 26</span>: 
                <a href="bandsintown.com/t/1035894547?affil_code=js_thebuttertones.com&app_id=js_thebuttertones.com&came_from=700&ticket_id=1681128626&utm_campaign=ticket_tktpp&utm_medium=web&utm_source=widget" target="_blank">Sacramento, CA - Ace of Spades</a>
            </li>
            <li>
                <span class="date">Oct 27</span>: 
                <a href="https://www.tixr.com/groups/cornerstoneberkeley/events/the-buttertones-150298" target="_blank">Berkley, CA - Cornerstone</a>
            </li>
            <li>
                <span class="date">Nov 15</span>: 
                <a href="https://www.bandsintown.com/t/1035863823?affil_code=js_thebuttertones.com&app_id=js_thebuttertones.com&came_from=700&ticket_id=1682081070&utm_campaign=ticket_tktpp&utm_medium=web&utm_source=widget" target="_blank">Santa Ana, CA - The Observatory</a>
            </li>
        </ul>
        
        <p class="cta-message">Get your tickets before they sell out!</p>
    </main>

    <footer>
        <p>&copy; 2025 Gold Tooth. All Rights Reserved.</p>
    </footer>

    <audio id="clickSound" src="gb-click.mp3" preload="auto"></audio>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const sound = document.getElementById('clickSound');
            const showLinks = document.querySelectorAll('.show-list a');
            const loadingScreen = document.getElementById('loadingScreen');
            const progressBar = loadingScreen ? loadingScreen.querySelector('.loading-bar') : null;
            const LOADING_DURATION = 2600;
            const FADE_DURATION = 800;
            let dismissTimer = null;
            let hideTimer = null;

            const clearTimers = () => {
                if (dismissTimer) {
                    clearTimeout(dismissTimer);
                    dismissTimer = null;
                }
                if (hideTimer) {
                    clearTimeout(hideTimer);
                    hideTimer = null;
                }
            };

            const resetLoadingScreen = () => {
                if (!loadingScreen) {
                    return;
                }

                clearTimers();
                loadingScreen.classList.remove('fade-out', 'is-hidden');
                loadingScreen.style.removeProperty('display');

                if (progressBar) {
                    progressBar.style.animation = 'none';
                    // Trigger a reflow so that the animation can restart.
                    // eslint-disable-next-line no-unused-expressions
                    progressBar.offsetWidth;
                    progressBar.style.animation = '';
                }

                document.body.classList.remove('loaded');
            };

            showLinks.forEach(link => {
                link.addEventListener('click', function(event) {
                    event.preventDefault();

                    sound.currentTime = 0;
                    sound.play().catch(e => console.error("Sound play failed:", e));

                    setTimeout(() => {
                        window.open(link.href, link.target);
                    }, 150);
                });
            });

            const dismissLoadingScreen = () => {
                if (!loadingScreen) {
                    document.body.classList.add('loaded');
                    return;
                }

                document.body.classList.add('loaded');
                loadingScreen.classList.add('fade-out');
                hideTimer = window.setTimeout(() => {
                    loadingScreen.classList.add('is-hidden');
                }, FADE_DURATION);
            };

            const startLoadingSequence = () => {
                if (!loadingScreen) {
                    document.body.classList.add('loaded');
                    return;
                }

                resetLoadingScreen();

                if (document.readyState === 'complete') {
                    dismissTimer = window.setTimeout(dismissLoadingScreen, LOADING_DURATION);
                } else {
                    window.addEventListener('load', () => {
                        dismissTimer = window.setTimeout(dismissLoadingScreen, LOADING_DURATION);
                    }, { once: true });
                }
            };

            startLoadingSequence();

            window.addEventListener('pageshow', event => {
                const hasPerformanceApi = typeof performance !== 'undefined'
                    && typeof performance.getEntriesByType === 'function';
                const navigationEntries = hasPerformanceApi ? performance.getEntriesByType('navigation') : [];
                const cameFromHistory = event.persisted || (navigationEntries[0] && navigationEntries[0].type === 'back_forward');

                if (cameFromHistory) {
                    startLoadingSequence();
                }
            });
        });
    </script>
</body>
</html>